class EventLog < ActiveRecord::Base
#--------------------------------------------------------------------------------------------------------------------------------
#--------------------------------------------------------------------------------------------------------------------------------

  #--- associations
  belongs_to :user

#--------------------------------------------------------------------------------------------------------------------------------

  def self.generate(usr,obj,act,res=nil,dscr=nil)
    return unless obj
    new_log = EventLog.create(

      :time        => Time.now,

      :user_id     => usr ? usr.id : 1,
      :object_id   => obj.id,
      :object_type => obj.class.name,
      
      :object_name => "#{obj.id} #{obj.class.name}",

      :action      => act,
      :result      => res,
      :comment     => dscr,

      :app_id      => 1
    )
    return new_log
  end

#--------------------------------------------------------------------------------------------------------------------------------
#--------------------------------------------------------------------------------------------------------------------------------
end
